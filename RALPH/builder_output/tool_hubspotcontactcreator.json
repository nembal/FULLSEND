{
  "name": "hubspotcontactcreator",
  "description": "A wrapper that authenticates with HubSpot and creates or updates contacts via the HubSpot REST API.",
  "constraints": "Requires a HubSpot API key (or OAuth token) with contacts write scope. The API key should be stored in environment variable HUBSPOT_API_KEY.",
  "skill_content": "# HubSpot Contact Creator\n\nThis tool provides functionality to create and update contacts in HubSpot via the HubSpot REST API.\n\n## Prerequisites\n\n- HubSpot API key with contacts write scope\n- Set environment variable `HUBSPOT_API_KEY` with your HubSpot private app access token\n\n## Usage\n\n```python\nimport os\nimport requests\nfrom typing import Dict, Any, Optional\n\ndef create_or_update_hubspot_contact(\n    email: str,\n    properties: Optional[Dict[str, Any]] = None\n) -> Dict[str, Any]:\n    \"\"\"\n    Create or update a HubSpot contact.\n    \n    Args:\n        email: Contact's email address (required, used as unique identifier)\n        properties: Additional contact properties (firstname, lastname, phone, company, etc.)\n    \n    Returns:\n        Dict containing the created/updated contact data\n    \n    Raises:\n        ValueError: If HUBSPOT_API_KEY is not set\n        requests.HTTPError: If the API request fails\n    \"\"\"\n    api_key = os.getenv(\"HUBSPOT_API_KEY\")\n    if not api_key:\n        raise ValueError(\"HUBSPOT_API_KEY environment variable is not set\")\n    \n    # Prepare contact properties\n    contact_properties = {\"email\": email}\n    if properties:\n        contact_properties.update(properties)\n    \n    # HubSpot API endpoint\n    url = \"https://api.hubapi.com/crm/v3/objects/contacts\"\n    headers = {\n        \"Authorization\": f\"Bearer {api_key}\",\n        \"Content-Type\": \"application/json\"\n    }\n    \n    # Prepare request body\n    body = {\n        \"properties\": contact_properties\n    }\n    \n    # Try to create the contact\n    response = requests.post(url, headers=headers, json=body)\n    \n    # If contact already exists (409 conflict), update instead\n    if response.status_code == 409:\n        # Search for contact by email\n        search_url = \"https://api.hubapi.com/crm/v3/objects/contacts/search\"\n        search_body = {\n            \"filterGroups\": [{\n                \"filters\": [{\n                    \"propertyName\": \"email\",\n                    \"operator\": \"EQ\",\n                    \"value\": email\n                }]\n            }]\n        }\n        search_response = requests.post(search_url, headers=headers, json=search_body)\n        search_response.raise_for_status()\n        search_data = search_response.json()\n        \n        if search_data.get(\"results\"):\n            contact_id = search_data[\"results\"][0][\"id\"]\n            # Update existing contact\n            update_url = f\"https://api.hubapi.com/crm/v3/objects/contacts/{contact_id}\"\n            update_response = requests.patch(update_url, headers=headers, json=body)\n            update_response.raise_for_status()\n            return update_response.json()\n    \n    response.raise_for_status()\n    return response.json()\n\n# Example usage:\nif __name__ == \"__main__\":\n    # Create a contact\n    contact = create_or_update_hubspot_contact(\n        email=\"test@example.com\",\n        properties={\n            \"firstname\": \"John\",\n            \"lastname\": \"Doe\",\n            \"phone\": \"+1234567890\",\n            \"company\": \"Acme Corp\"\n        }\n    )\n    print(f\"Contact created/updated: {contact['id']}\")\n```\n\n## Common Properties\n\n- `firstname`: First name\n- `lastname`: Last name\n- `phone`: Phone number\n- `company`: Company name\n- `website`: Website URL\n- `city`: City\n- `state`: State/Region\n- `country`: Country\n- `jobtitle`: Job title\n- `lifecyclestage`: Lifecycle stage (subscriber, lead, opportunity, customer, etc.)\n\n## Error Handling\n\nThe function will:\n- Raise `ValueError` if HUBSPOT_API_KEY is not set\n- Raise `requests.HTTPError` if the API request fails\n- Automatically handle duplicate contacts by updating instead of creating\n\n## API Documentation\n\nFor more information, see [HubSpot CRM API Documentation](https://developers.hubspot.com/docs/api/crm/contacts)\n",
  "addresses_blocked": [
    {
      "task": "Call HubSpot API to create a contact with email test@example.com",
      "reason": "Provides HubSpot API integration with authentication and contact creation/update capabilities"
    }
  ]
}
